@page
@model ReACT.Areas.User.Pages.ForumModel

<div class="hero h-1/3 bg-emerald-100 mb-12">
    <div class="hero-overlay bg-opacity-20"></div>
    <div class="hero-contenttext-black">
        <div class="max-w-prose">
            <h1 class="mb-5 text-6xl font-bold">Forum</h1>
        </div>
    </div>
</div>

<div class="justify-end">
    <label class="btn btn-md btn-primary rounded-full gap-1.5" for="newThread-modal-toggle">
        <i class="ph-chats-bold"></i>
        New Thread
    </label>
</div>

<div x-data>
    <input type="checkbox" id="newThread-modal-toggle" class="modal-toggle" x-on:change.once="$dispatch('showNewThreadModal')" />
    <label for="newThread-modal-toggle" class="modal cursor-pointer" x-ref="modalNewThread">
        <label class="modal-box relative w-[50vw] max-w-none h-[85vh]" for="">
            <label for="newThread-modal-toggle" class="btn btn-sm btn-circle absolute right-2 top-2">
                <i class="ph-x"></i>
            </label>
            <div hx-get="@Url.ActionLink("ModalRootFrame", "New Thread")" hx-trigger="showNewThreadModal from:#newThread-modal-toggle" hx-swap="outerHTML"></div>

            <!--Modal content goes here-->
            <h1 class="text-4xl">Create New Thread</h1>
            <form class="mt-3" method="post">
                <div asp-validation-summary="All" class="text-danger"></div>

                <div class="">
                    <label class="" asp-for="MyThread.Id"></label>
                    <div class="col-sm-10">
                        <input class="form-control" asp-for="MyThread.Id"
                               oninput="this.value = this.value.toUpperCase()" />
                        <span asp-validation-for="MyThread.Id" class="text-danger"></span>
                    </div>
                </div>
                <!-- more code to be added -->
                <div>
                    <input type="submit" value="Add" class="btn btn-primary" />
                </div>
            </form>

            <a class="btn btn-secondary ms-2" href="">Cancel</a>
        </label>
    </label>
</div>

@foreach (var thread in Model.threadList)
{
    @if (thread.Status != "hidden")
    {
        @*Forum posts*@
        <div class="grid grid-cols-5 gap-4">
            <div class="bg-emerald-100 text-primary rounded-lg mb-12 col-start-2 col-span-3 grid grid-cols-12">
                <div class="col-start-2 col-span-10">
                    <a class="text-2xl" asp-page="/forumThread" asp-route-id="@thread.Id">
                        @thread.Title
                    </a>
                </div>

                <div class="col-start-2 col-span-10">
                    <a class="text-lg" asp-page="/forumThread" asp-route-id="@thread.Id">
                        @thread.Content
                    </a>
                </div>

                @if (thread.ImageURL != "")
                {
                    <div>
                        @if (thread.ImageURL != "")
                        {
                            <img class="" src="@thread.ImageURL" loading="lazy" />
                        }
                    </div>
                }
            </div>
        </div>
    }
}

@*@section Scripts {
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }
}*@