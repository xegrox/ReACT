/**
 * Minified by jsDelivr using Terser v5.15.1.
 * Original file: /npm/alpine-turbo-drive-adapter@2.0.0/src/bridge.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{isValidVersion,dispatch}from"./utils";export default class Bridge{init(){if(!window.Alpine.version||!isValidVersion("3.0.0",window.Alpine.version))throw new Error("Invalid Alpine version. Please use Alpine 3.0.0 or above");window.Alpine.mutateDom((()=>{document.body.querySelectorAll("[x-cloak]").forEach((e=>{e.setAttribute("data-alpine-was-cloaked",e.getAttribute("x-cloak")??"")}))})),this.configureEventHandlers()}configureEventHandlers(){document.addEventListener("turbo:render",(e=>{document.documentElement.hasAttribute("data-turbo-preview")||(dispatch(document,"alpine:init"),dispatch(document,"alpine:initializing"),window.Alpine.flushAndStopDeferringMutations(),dispatch(document,"alpine:initialised"),window.Alpine.mutateDom((()=>{document.querySelectorAll("[data-alpine-ignored]").forEach((e=>{e.removeAttribute("x-ignore"),e.removeAttribute("data-alpine-ignored")}))})))})),document.addEventListener("turbo:before-render",(e=>{window.Alpine.mutateDom((()=>{document.documentElement.hasAttribute("data-turbo-preview")||e.detail.newBody.querySelectorAll("[data-alpine-generated-me],[x-cloak]").forEach((e=>{e.hasAttribute("x-cloak")&&e.setAttribute("data-alpine-was-cloaked",e.getAttribute("x-cloak")??""),e.hasAttribute("data-alpine-generated-me")&&(e.removeAttribute("data-alpine-generated-me"),e.remove())}))})),window.Alpine.deferMutations()})),document.addEventListener("turbo:before-cache",(e=>{window.Alpine.mutateDom((()=>{document.body.querySelectorAll("[x-for],[x-if],[data-alpine-was-cloaked]").forEach((e=>{e.hasAttribute("data-alpine-was-cloaked")&&(e.setAttribute("x-cloak",e.getAttribute("data-alpine-was-cloaked")??""),e.removeAttribute("data-alpine-was-cloaked")),e.hasAttribute("x-for")&&e._x_lookup&&Object.values(e._x_lookup).forEach((e=>e.setAttribute("data-alpine-generated-me",!0))),e.hasAttribute("x-if")&&e._x_currentIfEl&&e._x_currentIfEl.setAttribute("data-alpine-generated-me",!0)}))})),document.querySelectorAll("[data-turbo-permanent]").forEach((e=>{window.Alpine.mutateDom((()=>{e.hasAttribute("x-ignore")||(e.setAttribute("x-ignore",!0),e.setAttribute("data-alpine-ignored",!0)),e.querySelectorAll("[data-alpine-generated-me]").forEach((e=>{e.removeAttribute("data-alpine-generated-me")}))}))}))}))}}
//# sourceMappingURL=/sm/d940aa3cddaf1f598723931bcd6fa17e9d0c42fbe43da2d8c9713bfba9851652.map